<!doctype html>
<html lang="uk">
<head>
    <meta charset="utf-8" />
    <title>Продажі</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="./dashboard.css">
    <link rel="stylesheet" href="./sales.css">
</head>
<body>
    <div class="layout">
        <!-- APPBAR -->
        <header class="appbar">
            <img src="./logo.jpg" alt="Контакт" class="brand-logo" />
            <div class="today" id="today"></div>
        </header>

        <!-- SIDEBAR -->
        <aside class="sidebar">
            <div class="menu-title">МЕНЮ</div>
            <nav class="menu">
                <a href="./dashboard.html"><img class="ico" src="./icons/dashboard.png" alt=""><span>Дашборд</span></a>
                <a class="active"><img class="ico" src="./icons/sales.png" alt=""><span>Продажі</span></a>
                <a href="./repairs.html"><img class="ico" src="./icons/repairs.png" alt="">Ремонти</a>
                <a href="./clients.html"><img class="ico" src="./icons/clients.png" alt="">Клієнти</a>
                <a href="./products.html"><img class="ico" src="./icons/products.png" alt="">Конфігуратор ПК</a>
                <a href="./analytics.html"><img class="ico" src="./icons/analytics.png" alt="">Аналітика</a>
            </nav>

            <div class="menu-title small">ІНШЕ</div>
            <nav class="menu">
                <a><img class="ico" src="./icons/help.png" alt="">Допомога</a>
                <a><img class="ico" src="./icons/settings.png" alt="">Налаштування</a>
                <a id="logout"><img class="ico" src="./icons/logout.png" alt="">Вихід</a>
            </nav>
        </aside>

        <!-- MAIN -->
        <main class="main sales">
            <h1 class="page-title">Продажі</h1>

            <!-- Toolbar -->
            <div class="toolbar">
                <div class="left">
                    <div class="search">
                        <svg class="search-ico" width="18" height="18" viewBox="0 0 24 24" fill="none">
                            <path d="M21 21l-4.2-4.2M11 19a8 8 0 1 1 0-16 8 8 0 0 1 0 16Z"
                                  stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                        </svg>
                        <input id="q" type="text" placeholder="Пошук: клієнт або товар">
                    </div>

                    <details class="dropdown">
                        <summary class="btn btn-ghost">Фільтри</summary>
                        <div class="dropdown-menu">
                            <label>Дата від <input id="fFrom" type="date"></label>
                            <label>Дата до <input id="fTo" type="date"></label>
                            <label>
                                Статус
                                <select id="fStatus">
                                    <option value="">Будь-який</option>
                                    <option value="done">Завершено</option>
                                    <option value="processing">В обробці</option>
                                    <option value="cancelled">Скасовано</option>
                                </select>
                            </label>
                            <div class="dropdown-actions">
                                <button class="btn btn-ghost" type="button" id="fReset">Скинути</button>
                                <button class="btn" type="button" id="fApply">Застосувати</button>
                            </div>
                        </div>
                    </details>

                    <details class="dropdown">
                        <summary class="btn btn-ghost">Сортування</summary>
                        <div class="dropdown-menu narrow">
                            <label>
                                Поле
                                <select id="sortField">
                                    <option value="Date">Дата</option>
                                    <option value="ClientName">Клієнт</option>
                                    <option value="ProductName">Товар</option>
                                    <option value="TotalPrice">Ціна</option>
                                </select>
                            </label>
                            <label>
                                Порядок
                                <select id="sortDir">
                                    <option value="desc">Спадання ↓</option>
                                    <option value="asc">Зростання ↑</option>
                                </select>
                            </label>
                            <div class="dropdown-actions">
                                <button class="btn btn-ghost" type="button" id="sReset">Скинути</button>
                                <button class="btn" type="button" id="sApply">Ок</button>
                            </div>
                        </div>
                    </details>
                </div>

                <div class="right">
                    <button id="btnAddSale" class="btn" type="button">Зареєструвати продаж</button>
                </div>
            </div>

            <!-- Таблиця -->
            <div class="table-wrap">
                <table class="table-sales">
                    <thead>
                        <tr>
                            <th data-sort="Date">Дата</th>
                            <th data-sort="ClientName">Клієнт</th>
                            <th data-sort="ProductName">Товар</th>
                            <th data-sort="Quantity">Кількість</th>
                            <th data-sort="TotalPrice">Ціна</th>
                            <th data-sort="Payment">Оплата</th>
                            <th data-sort="Status">Статус</th>
                            <th>Дії</th>
                        </tr>
                    </thead>
                    <tbody id="salesTbody"></tbody>
                </table>
            </div>

            <!-- Пагінація -->
            <div id="pager" class="pager"></div>
        </main>
    </div>

    <!-- МОДАЛКА: Зареєструвати продаж -->
    <div id="saleModal" class="modal-layer" hidden>
        <div class="modal-card">
            <form id="saleForm" class="card" autocomplete="off">
                <h2 class="card-title">Зареєструвати продаж</h2>

                <div class="row two">
                    <div class="field">
                        <label for="sfDate">Дата *</label>
                        <input id="sfDate" type="date" required>
                    </div>
                    <div class="field">
                        <label for="sfPayment">Оплата *</label>
                        <select id="sfPayment" required>
                            <option value="Готівка">Готівка</option>
                            <option value="Картка">Картка</option>
                        </select>
                    </div>
                </div>

                <div class="row">
                    <div class="field">
                        <label for="sfClient">Клієнт *</label>
                        <input id="sfClient" type="text" placeholder="Почни вводити ім’я…" list="clientList" required>
                        <datalist id="clientList"></datalist>
                        <input id="sfClientId" type="hidden">
                    </div>
                </div>

                <div class="row two">
                    <div class="field">
                        <label for="sfProduct">Товар/послуга *</label>
                        <input id="sfProduct" type="text" placeholder="Назва позиції" required>
                    </div>
                    <div class="field">
                        <label for="sfQty">Кількість *</label>
                        <input id="sfQty" type="number" min="1" step="1" value="1" required>
                    </div>
                </div>

                <div class="row two">
                    <div class="field">
                        <label for="sfPrice">Ціна за одиницю, ₴ *</label>
                        <input id="sfPrice" type="number" min="0" step="1" value="0" required>
                    </div>
                    <div class="field">
                        <label for="sfStatus">Статус *</label>
                        <select id="sfStatus" required>
                            <option value="done">Завершено</option>
                            <option value="processing">В обробці</option>
                            <option value="cancelled">Скасовано</option>
                        </select>
                    </div>
                </div>

                <div class="row">
                    <div class="field">
                        <label for="sfNote">Примітка</label>
                        <input id="sfNote" type="text" placeholder="(необов’язково)">
                    </div>
                </div>

                <div class="actions">
                    <button type="button" class="btn-ghost" id="sfCancel">Скасувати</button>
                    <button type="submit" class="btn">Зберегти</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Портал меню рядка -->
    <div id="rowMenuPortal" class="row-menu-portal" hidden></div>

    <script defer src="./sales.js"></script>
</body>
</html>
